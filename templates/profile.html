{% extends "base.html" %}
{% block title %}{{ user.firstname }} {{ user.lastname }} | StageFinder{% endblock %}

{% block content %}
    <div class="card">
        <h2>{{ user.firstname }} {{ user.lastname }}</h2>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>R√¥le:</strong> {{ user.role.value }}</p>
        
        <p><strong>Bio:</strong> {{ user.bio or "Pas de biographie." }}</p>
        <p><strong>√âtudie √†:</strong> {{ user.study_place or "N/A" }}</p>
        <p><strong>Travaille √†:</strong> {{ user.work_place or "N/A" }}</p>
        
        <p><strong>LinkedIn:</strong> <a href="{{ user.linkedin_link }}">{{ user.linkedin_link }}</a></p>
        <p><strong>GitHub:</strong> <a href="{{ user.github_link }}">{{ user.github_link }}</a></p>
        
        <!-- Follower Stats -->
        <div class="follower-stats">
            <p><strong>üë• {{ user.followers.count() }} abonn√©s</strong></p>
            <p><strong>‚û°Ô∏è {{ user.following.count() }} en train de suivre</strong></p>
        </div>
        
        {% if user.id == current_user.id %}
            <a href="{{ url_for('main.settings') }}" class="btn">Modifier le profil</a>
        {% else %}
            <!-- Follow/Unfollow button -->
            <form method="POST" action="{{ url_for('main.follow_user', user_id=user.id) }}" style="display:inline;">
                {% if user in current_user.following %}
                    <button type="submit" class="btn btn-secondary">Ne plus suivre</button>
                {% else %}
                    <button type="submit" class="btn btn-primary">Suivre</button>
                {% endif %}
            </form>
        {% endif %}
    </div>

    <h3>Posts de {{ user.firstname }}</h3>
    {% for post in user.posts %}
     <div class="card">
            <p>{{ post.content }}</p>
            <span style="color: #666; font-size: 0.9em;">@ {{ post.timestamp.strftime('%Y-%m-%d %H:%M') }}</span>
        </div>
    {% else %}
        <p>{{ user.firstname }} n'a encore rien post√©.</p>
    {% endfor %}
{% endblock %}